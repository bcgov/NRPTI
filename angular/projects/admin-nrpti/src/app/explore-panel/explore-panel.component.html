<form *ngIf="formGroup" [formGroup]="formGroup" novalidate>
  <section>
    <div class="row">
      <div class="col-4">
        <div class="row">
          <div class="col-6">
            <label for="dateIssuedStartFilter" class="control-label font-weight-bold">Start Issued Date</label>
            <lib-date-picker
              id="dateIssuedStartFilter"
              [control]="formGroup.get('dateIssuedStart')"
              [reset]="resetControls"
              [minDate]="minDate"
              [maxDate]="maxDate"></lib-date-picker>
          </div>
          <div class="col-6">
            <label for="dateIssuedEndFilter" class="control-label font-weight-bold">End Issued Date</label>
            <lib-date-picker
              id="dateIssuedEndFilter"
              [control]="formGroup.get('dateIssuedEnd')"
              [reset]="resetControls"
              [minDate]="minDate"
              [maxDate]="maxDate"></lib-date-picker>
          </div>
        </div>
      </div>
      <div class="col-4">
        <label class="control-label font-weight-bold">Entity Type</label>
        <div class="row">
          <div class="col-6">
            <mat-checkbox id="issuedToCompany" formControlName="issuedToCompany">
              Company
            </mat-checkbox>
          </div>
          <div class="col-6">
            <mat-checkbox id="issuedToIndividual" formControlName="issuedToIndividual">
              Individual
            </mat-checkbox>
          </div>
        </div>
      </div>
      <div class="col-4">
      </div>
    </div>
  </section>
  <section>
    <div class="row">
      <div class="col-4">
        <label for="agencyFilter">Responsible Agency</label>
        <span *ngIf="agencyCount" class="grey-subtext ml-2">({{ agencyCount }} selected)</span>
        <app-autocomplete-multi-select
          id="agencyFilter"
          [control]="formGroup.get('agency')"
          [options]="agencyOptions"
          [reset]="resetControls"
          [placeholderText]="'Begin typing to filter agencies...'"
          (numSelected)="agencyCount = $event"></app-autocomplete-multi-select>
      </div>
      <div class="col-4">
        <div class="label-pair">
          <label for="actFilter">Act</label>
          <span *ngIf="actCount" class="grey-subtext ml-2">({{ actCount }} selected)</span>
          <app-autocomplete-multi-select
            id="actFilter"
            [control]="formGroup.get('act')"
            [options]="actOptions"
            [reset]="resetControls"
            [placeholderText]="'Begin typing to filter acts...'"
            (numSelected)="actCount = $event"></app-autocomplete-multi-select>
        </div>
      </div>
      <div class="col-4">
        <div class="label-pair">
          <label for="regulationFilter">Regulation</label>
          <span *ngIf="regulationCount" class="grey-subtext ml-2">({{ regulationCount }} selected)</span>
          <app-autocomplete-multi-select
            id="regulationFilter"
            [control]="formGroup.get('regulation')"
            [options]="regulationOptions"
            [reset]="resetControls"
            [placeholderText]="'Begin typing to filter regulations...'"
            (numSelected)="regulationCount = $event"></app-autocomplete-multi-select>
        </div>
      </div>
    </div>
  </section>
</form>

<section class="mt-4">
  <div class="row">
    <div class="col-12">
      <span *ngFor="let section of filterSections">
        <label class="control-label font-weight-bold">{{ section.displayName }}</label>
        <div class="select-badge-group">
          <span *ngFor="let filter of section.textFilters">
            <div class="select-badge">
              <input
                type="checkbox"
                name="{{ filter.displayName }}"
                id="_{{ filter.displayName }}"
                (ngModelChange)="dataChanged($event, filter.fieldName, filter.displayName)"
                [ngModel]="isEnabled(filter.fieldName, filter.displayName)" />
              <label for="_{{ filter.displayName }}">{{ filter.displayName }}</label>
            </div>
          </span>
        </div>
      </span>
    </div>
  </div>
</section>